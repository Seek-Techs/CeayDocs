

Rule:
ðŸ‘‰ utils/ = pure business logic
ðŸ‘‰ api/ = HTTP + validation + auth
ðŸ‘‰ app.py = UI only

ðŸ”’ Golden Rules (memorize these)

Read UploadFile exactly once

Pass bytes to utils, not UploadFile

Utils never call .read()

API layer handles async, utils stay sync

Rule (mandatory):

All utils must accept bytes only.
All routers must be responsible for reading the file exactly once.

No exceptions.